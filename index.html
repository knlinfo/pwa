<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KNL App</title>
  <link rel="manifest" href="./manifest.json">
  <link rel="shortcut icon" href="https://knlinfo.github.io/pwa/img/knl24x24.png" type="image/x-icon">

<style>

#loading-container {

  height: 100vh;
  background-color: rgba(255, 255, 255, 0.6); /* Semi-transparent background */
  display: flex;
  justify-content: center;
  align-items: center;
}
</style>

</head>

<body style=" margin: 0; padding: 0; height: 100vh;">
<div id="loading-container">
  <img align="center" style="width:40%;" src="img/loading-gif.gif" alt="Loading..." />
</div>
</body>

<script src="./script.js"></script>
<script>
// if ("geolocation" in navigator) {
//   navigator.geolocation.getCurrentPosition(
//     function(position) {
//       // Handle successful geolocation 
//       // Create an iframe element
      var queryParams = window.location.search;
      var iframe = document.createElement("iframe");

      // for the iframe
      var iframeURL = "https://script.google.com/a/macros/knlinfo.com/s/AKfycbxAmc1nsUjLYdbkyOBNgW9anAa-6Bl82EOOyxYgS5ytgQ4ZWtZKZnv6W7JN2JJxqNPo/exec";
      iframe.src = iframeURL+queryParams;
      iframe.frameBorder = "0";
      iframe.width = "100%";
      iframe.height = "100%";
      iframe.allow = "geolocation";

      // Append the iframe to the body
      document.body.appendChild(iframe);
      iframe.addEventListener('load', function () {
        // Once the iframe's source is loaded, hide the loading container and show the iframe
        document.getElementById('loading-container').style.display = 'none';
        iframe.style.display = 'block';
      });
      
//     },
//     function(error) {
//       // Handle geolocation error or user denial here
//       if (error.code === error.PERMISSION_DENIED) {
//         // The user denied location permission, you can display a custom message
//         // Create a div element
//         var div = document.createElement("div");
//         div.textContent = "Location access permission is compulsory for updating customer locations. Turn ON location and then refresh the app";
// document.getElementById('loading-container').style.display = 'none';
//         // Append the div to the body
//         document.body.appendChild(div);

//         alert("Location access permission is compulsory for updating customer locations. Turn ON location and then refresh the app");
//       } else {
//         // Handle other errors, such as geolocation not available
//         console.error("Geolocation error:", error);
//       }
//     },
//     {
//       // Options object including a custom message
//       enableHighAccuracy: true,
//       timeout: 5000,
//       maximumAge: 0,
//     }
//   );
// }
</script>

</html>
